-- Criar primeiramente o banco de dados em seguida as tabelas

CREATE DATABASE seguradora;

CREATE TABLE E0_USUARIO (
    ID INT(11) PRIMARY KEY,
    NOME VARCHAR(140),
    EMAIL VARCHAR(140),
    SENHA VARCHAR(16) 
);

CREATE TABLE E1_CLIENTE (
    COD INT(3) PRIMARY KEY,
    NOME VARCHAR(30),
    CPF VARCHAR(11),
    RG VARCHAR(10),
    TEL VARCHAR(9),
    FK_END_END_PK INT(3),
    FK_E2_VEICULOS_COD INT(3)
);

CREATE TABLE E2_VEICULOS (
    COD INT(3) PRIMARY KEY,
    PLACA VARCHAR(8),
    RENAVAN VARCHAR(11),
    FABRICANTE VARCHAR(15),
    MODELO VARCHAR(15),
    ANO INT(4)
);

CREATE TABLE E3_OCORRENCIAS (
    NR_OCOR INT(3) PRIMARY KEY,
    DATA DATE,
    LOCAL VARCHAR(50),
    DESCR VARCHAR(100)
);

CREATE TABLE END (
    END_PK INT(3) NOT NULL PRIMARY KEY,
    BAIRRO VARCHAR(50),
    UF VARCHAR(2),
    LOGRADOURO VARCHAR(50)
);

CREATE TABLE POSSUI (
    FK_E3_OCORRENCIAS_NR_OCOR INT(3),
    FK_E2_VEICULOS_COD INT(3)
);
 
ALTER TABLE E1_CLIENTE ADD CONSTRAINT FK_E1_CLIENTE_2
    FOREIGN KEY (FK_END_END_PK)
    REFERENCES END (END_PK)
    ON DELETE NO ACTION;
 
ALTER TABLE E1_CLIENTE ADD CONSTRAINT FK_E1_CLIENTE_3
    FOREIGN KEY (FK_E2_VEICULOS_COD)
    REFERENCES E2_VEICULOS (COD)
    ON DELETE RESTRICT;
 
ALTER TABLE POSSUI ADD CONSTRAINT FK_POSSUI_1
    FOREIGN KEY (FK_E3_OCORRENCIAS_NR_OCOR)
    REFERENCES E3_OCORRENCIAS (NR_OCOR)
    ON DELETE RESTRICT;
 

ALTER TABLE POSSUI ADD CONSTRAINT FK_POSSUI_2
    FOREIGN KEY (FK_E2_VEICULOS_COD)
    REFERENCES E2_VEICULOS (COD)
    ON DELETE RESTRICT;